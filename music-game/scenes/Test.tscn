[gd_scene load_steps=8 format=3 uid="uid://biuec42i4l4vp"]

[ext_resource type="Script" uid="uid://cwvamhwj8au1c" path="res://scripts/transcription_test.gd" id="1_0d6la"]
[ext_resource type="Texture2D" uid="uid://dkf1gwo3haoxh" path="res://assets/music_staff2.jpg" id="2_amo3t"]
[ext_resource type="Texture2D" uid="uid://461665ijh60t" path="res://assets/music_staff.jpg" id="2_di7wo"]
[ext_resource type="PackedScene" uid="uid://bspbpm7y5k202" path="res://scenes/note_select_button.tscn" id="3_0d6la"]
[ext_resource type="Script" uid="uid://bvjornv38aim" path="res://scenes/camera.gd" id="3_di7wo"]
[ext_resource type="Texture2D" uid="uid://blvmm10g3qluk" path="res://assets/return_arrow.png" id="5_iscks"]
[ext_resource type="FontFile" uid="uid://bljbj8hlsg77m" path="res://assets/LowresPixel-Regular.otf" id="5_qca6q"]

[node name="test_midi" type="Node2D"]
script = ExtResource("1_0d6la")

[node name="staff" type="Sprite2D" parent="."]
texture = ExtResource("2_di7wo")

[node name="staff2" type="Sprite2D" parent="."]
visible = false
texture = ExtResource("2_amo3t")

[node name="Camera2D" type="Camera2D" parent="."]
zoom = Vector2(0.7, 0.7)
limit_left = -500
limit_top = -400
limit_right = 1200
script = ExtResource("3_di7wo")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="HSlider" type="HSlider" parent="CanvasLayer"]
offset_left = 778.0
offset_top = 110.0
offset_right = 981.0
offset_bottom = 126.0
focus_mode = 0
min_value = 20.0
max_value = 200.0
value = 120.0

[node name="Label" type="Label" parent="CanvasLayer/HSlider"]
layout_mode = 0
offset_top = -23.0
offset_right = 193.0
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_fonts/font = ExtResource("5_qca6q")
text = "Current Tempo: 120 BPM"

[node name="Note Select Button" parent="CanvasLayer" instance=ExtResource("3_0d6la")]
position = Vector2(31, 578)

[node name="accidentalType" type="Button" parent="CanvasLayer"]
offset_left = 911.0
offset_top = 34.0
offset_right = 1117.0
offset_bottom = 65.0
focus_mode = 0
theme_override_fonts/font = ExtResource("5_qca6q")
text = "MIDI Accidental: Sharp"

[node name="Button" type="Button" parent="CanvasLayer"]
offset_left = 783.0
offset_top = 34.0
offset_right = 888.0
offset_bottom = 65.0
focus_mode = 0
theme_override_fonts/font = ExtResource("5_qca6q")
text = "Play Current"

[node name="instruc_button" type="Button" parent="CanvasLayer"]
offset_left = 991.0
offset_top = 92.0
offset_right = 1117.0
offset_bottom = 123.0
focus_mode = 0
theme_override_fonts/font = ExtResource("5_qca6q")
text = "Instructions"

[node name="instructions" type="Node2D" parent="CanvasLayer"]
z_index = 300
position = Vector2(1, 23)

[node name="ColorRect" type="ColorRect" parent="CanvasLayer/instructions"]
offset_left = 138.0
offset_top = 129.0
offset_right = 1010.0
offset_bottom = 531.0
color = Color(0.912289, 0.912289, 0.912289, 1)

[node name="RichTextLabel" type="RichTextLabel" parent="CanvasLayer/instructions"]
offset_left = 290.0
offset_top = 13.0
offset_right = 890.0
offset_bottom = 661.0
theme_override_colors/default_color = Color(0, 0, 0, 1)
theme_override_fonts/normal_font = ExtResource("5_qca6q")
theme_override_fonts/bold_italics_font = ExtResource("5_qca6q")
theme_override_font_sizes/normal_font_size = 17
theme_override_font_sizes/bold_font_size = 20
bbcode_enabled = true
text = "[b]Instructions:[/b]

- Use mouse to drag
- Middle keypad is for music notes; keys [A, S, D, F, G, H, J, K] correspond to the notes [C, D, E, F, G, A, B, C]
- Use UP and DOWN ARROWS to change octaves
- Press ENTER or RIGHT ARROW to confirm a note
- Use LEFT and RIGHT ARROWS to move between notes
- LEFT CLICK on note to switch between sharp, flat, or no accidental
- Press BACKSPACE to DELETE a note / create a REST

- Press PLAY CURRENT to hear your creation !!
- Experiment by changing the length of note & the tempo!! have fun! :)

- PS: if connected to a MIDI keyboard, you may toggle accidentals between SHARP and FLAT. Other controls remain the same."
tab_size = 6
horizontal_alignment = 1
vertical_alignment = 1
metadata/_edit_use_anchors_ = true

[node name="TextureButton" type="TextureButton" parent="CanvasLayer/instructions"]
offset_left = 970.0
offset_top = 148.0
offset_right = 1482.0
offset_bottom = 660.0
scale = Vector2(0.05, 0.05)
focus_mode = 0
texture_normal = ExtResource("5_iscks")
metadata/_edit_use_anchors_ = true

[node name="Selected Note" type="ColorRect" parent="."]
z_index = 100
offset_left = -212.0
offset_top = -115.0
offset_right = -141.0
offset_bottom = 128.0
mouse_filter = 2
color = Color(0.121569, 0.815686, 0.992157, 0.490196)

[connection signal="value_changed" from="CanvasLayer/HSlider" to="." method="_on_h_slider_value_changed"]
[connection signal="pressed" from="CanvasLayer/accidentalType" to="." method="_on_accidental_type_pressed"]
[connection signal="pressed" from="CanvasLayer/Button" to="." method="_on_button_pressed"]
[connection signal="pressed" from="CanvasLayer/instruc_button" to="." method="_on_instruc_button_pressed"]
[connection signal="pressed" from="CanvasLayer/instructions/TextureButton" to="." method="_on_texture_button_pressed"]
